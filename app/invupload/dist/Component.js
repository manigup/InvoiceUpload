sap.ui.define(["sap/ui/core/UIComponent","sap/m/MessageBox","sap/fiori/invupload/model/formatter"],function(e,a){"use strict";return e.extend("sap.fiori.invupload.Component",{metadata:{manifest:"json"},init:function(){e.prototype.init.apply(this,arguments);this.getModel().metadataLoaded(true).then(()=>{var e=window.location.href.includes("site");if(e){var a=e?"/":"";var t=jQuery.sap.getModulePath("sap/fiori/invupload");t=t==="."?"":t;$.ajax({url:t+a+"user-api/attributes",type:"GET",success:e=>{const a=e;sap.ui.getCore().loginEmail=a.email;sap.ui.getCore().userName=a.firstname+" "+a.lastname;this.setHeaders(a.login_name[0],a.type[0].substring(0,1).toUpperCase())}})}else{sap.ui.getCore().loginEmail="samarnahak@kpmg.com";sap.ui.getCore().userName="Samar"+" "+"Nahak";this.setHeaders("1100123","P")}}).catch(e=>this.handleError(e.responseText));this.getModel().attachRequestFailed(e=>this.handleError(e.getParameter("response").responseText))},setHeaders:function(e,a){this.getModel().setHeaders({loginId:e,loginType:a});this.getRouter().initialize()},handleError:function(e){if(e.indexOf("<?xml")!==-1){a.error($($.parseXML(e)).find("message").text())}else if(e.indexOf("{")!==-1){a.error(JSON.parse(e).error.message.value)}else{a.error(e)}}})});